---
Test
---
!define TEST_SYSTEM {FIT}
!define COMMAND_PATTERN {%m -r fitnesse.fitserver.FitServer %p}
!define TEST_RUNNER {${FITSHARP_HOME}\Runner.exe}
!path ${RESTFIXTURE_SERVER_HOME}\FitNesseTestServer.dll
!path ${RESTFIXTURE_HOME}\RestFixture.Net.dll

!| Import |
| restFixture.Net |
| restFixture.Net.Fixtures |
| FitNesseTestServer.Test.FitNesse.Fixture |

!| Action Fixture |
| start | Http Server Fixture |
| check | Started   | false  |
| enter | start server | 7654  |
| check | started   | true  |
| press | Reset Resources Database  |

A POST request with a URL-encoded body should create a resouce:

| Fit Rest Fixture | http://localhost:7654 |
| setHeader        | Content-Type : application/x-www-form-urlencoded;charset=UTF-8    |
| setBody          | name=test%20post&data=some%20data                                 |
| POST             | /resources           | 201   |                               | no-body |
| LET              | id                   |header | Location:/resources/(.+)      |         |
| GET              | /resources/%id%      |200    |                               | !-/resource/name[text()='test post']
/resource/data[text()='some data']-! |

!| Action Fixture |
| start | Http Server Fixture |
| check | started   | true    |
| press | stop server         |
| check | started   | false   |