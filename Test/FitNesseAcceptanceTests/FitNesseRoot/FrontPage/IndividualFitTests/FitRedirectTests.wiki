---
Test
---
!define TEST_SYSTEM {FIT}
!define COMMAND_PATTERN {%m -r fitnesse.fitserver.FitServer %p}
!define TEST_RUNNER {${FITSHARP_HOME}\Runner.exe}
!path ${RESTFIXTURE_SERVER_HOME}\FitNesseTestServer.dll
!path ${RESTFIXTURE_HOME}\RestFixture.Net.dll

!| Import |
| restFixture.Net |
| restFixture.Net.Fixtures |
| FitNesseTestServer.Test.FitNesse.Fixture |

!| Action Fixture |
| start | Http Server Fixture |
| check | Started   | false  |
| enter | start server | 7654  |
| check | started   | true  |
| press | Reset Resources Database  |

!* Notes
1) By default redirects are followed;
2) To explicitly enable or disable the automatic following of redirects, use the !-RestFixtureConfig-! 
setting '''restfixture.requests.follow.redirects'''.
*!

By default, a GET request should automatically follow a redirect:

!| Fit Rest Fixture | http://localhost:7654 |
| GET | /resources/redirect/0  | 200 |  |  |

!| Rest Fixture Config |
| restfixture.requests.follow.redirects | false |

A GET request should '''not''' automatically follow a redirect if the configuration setting 
is false:

!| Fit Rest Fixture | http://localhost:7654 |
| GET | /resources/redirect/0  | 301 | Location: /resources/0 | no-body |

!| Rest Fixture Config |
| restfixture.requests.follow.redirects | true |

A GET request '''should''' automatically follow a redirect if the configuration setting 
is true:

!| Fit Rest Fixture | http://localhost:7654 |
| GET | /resources/redirect/0  | 200 |  |  |

!| Action Fixture |
| start | Http Server Fixture |
| check | started   | true    |
| press | stop server         |
| check | started   | false   |